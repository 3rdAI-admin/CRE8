# Cursor Setup for Context Engineering

This project includes Cursor-specific configuration for AI-assisted development.

> **Original Creator:** [Cole Medin](https://github.com/coleam00) | **Contributor:** [James Avila](https://th3rdai.com) | [Repository](https://github.com/coleam00/Context-Engineering-Intro)

## Quick Start

### Automated Setup (Recommended)

Run the setup script from the project root:

```bash
./SETUP-CURSOR.sh
```

This script will:
1. ✅ Check Cursor CLI is available
2. ✅ Verify project structure and AI rules
3. ✅ Confirm settings are properly configured

### Manual Setup

1. **Install Prerequisites**
   - [Cursor](https://cursor.sh/)
   - Ensure `cursor` command is available in terminal

2. **Open Project**
   ```bash
   cursor /path/to/context-engineering-intro
   ```

3. **Verify Rules Applied**
   - Check `.cursorrules` file exists in project root
   - Cursor automatically reads this file for AI context

## Configuration Files

```
.cursor/
├── prompts/          # Slash commands (same 7 as VS Code/Claude)
│   ├── new-project.md
│   ├── generate-prp.md
│   ├── execute-prp.md
│   ├── build-prp.md
│   ├── generate-prompt.md
│   ├── validate.md            # /validate for template (8 phases + journal)
│   ├── validate-project.md    # (generated) /validate-project for this project
│   └── generate-validate.md  # Creates /validate-project from example-validate
├── commands/
├── rules/
│   └── validate-context-engineering.mdc  # /validate-project and /validate rules
├── settings.json     # Cursor workspace settings
└── README.md        # This file

.cursorrules         # AI instructions (root level)
```

## How It Works

### Slash Commands (`.cursor/prompts/`)
Cursor now supports slash commands just like VS Code and Claude Code! Use these in chat:

**Execution order** (all 7 commands):

| Order | Command | Description | When to run |
|-------|---------|-------------|-------------|
| 1 | `/new-project` | Create a new project from the template; **copies all slash commands** (`.cursor/`, `.claude/`, etc.) into the new project so you can open it in Cursor and continue with `/generate-prp`, `/execute-prp`, etc. | When starting a new project |
| 2 | `/generate-prp` | Create implementation plan from INITIAL.md | For each feature or when requirements change |
| 3 | `/generate-validate` | Analyze codebase and create **`/validate-project`** from example-validate | **Once, or after a significant project change** (run after planning, before building) |
| 4 | `/build-prp` | Finalize PRP, then optionally build and run | After you have a PRP; when you want to finalize the plan before implementing |
| 5 | `/execute-prp` | Implement feature from PRP with validation | After `/build-prp` (or after `/generate-prp` if you skip review); main implementation path |
| 6 | **`/validate-project`** | Run **project-specific** validation (generated by `/generate-validate`) | After building; use this (not `/validate`) to avoid injected commands |
| 6b | `/validate` | Run **template** validation (8 phases + journal) in this repo only | When validating the context-engineering template itself |
| 7 | `/generate-prompt` | Generate XML-structured prompt with ambiguity detection | Anytime (quick tasks) |

**Usage:** Type `/` in Cursor chat to see available commands.

**New projects:** When you create a project with `/new-project`, the new project gets a full copy of the slash commands (`.cursor/prompts/`, etc.). Open that project in Cursor and you can run `/generate-prp`, `/execute-prp`, `/validate-project`, and the rest—no extra install needed.

**Same workflow in all three IDEs (VS Code, Claude Code, Cursor):** **`/generate-validate`** creates **`/validate-project`** in each IDE (`.github/prompts/validate-project.prompt.md`, `.claude/commands/validate-project.md`, `.cursor/prompts/validate-project.md`). Use **`/validate-project`** (not `/validate`) for project validation. In this repo only, **`/validate`** runs the 8-phase template check.

### .cursorrules
Located at project root, this file provides global context to Cursor AI about:
- Project architecture and structure
- Coding standards and conventions
- Key patterns to follow
- Validation requirements

Cursor automatically reads this file when working in the project.

### Workspace Settings
`.cursor/settings.json` configures:
- `cursor.chat.enableAgent`: Enables agent mode for complex tasks
- `cursor.composer.enabled`: Enables Composer for multi-file edits
- `cursor.chat.enablePrompts`: Enables slash commands from `.cursor/prompts/`
- Format on save preferences

## The PRP Workflow in Cursor

### Step 1: Define Requirements
Edit `INITIAL.md` with your feature requirements:

```markdown
## FEATURE:
[Describe what you want to build]

## EXAMPLES:
[Reference files in examples/ folder]

## DOCUMENTATION:
[Include relevant doc links]

## OTHER CONSIDERATIONS:
[Gotchas, specific requirements]
```

### Step 2: Generate PRP
Use the slash command:

```
/generate-prp INITIAL.md
```

### Step 3: Generate Validate (once or after significant change)
```
/generate-validate
```

### Step 4: Build PRP (optional – finalize plan)
```
/build-prp PRPs/my-feature.md
```

### Step 5: Execute PRP
Use the slash command:

```
/execute-prp PRPs/my-feature.md
```

### Step 6: Validate
Use the slash command:

```
/validate
```

Use **`/validate-project`** for project validation (generated by `/generate-validate`). Use **`/validate`** for the template's 8-phase check in this repo.

## Generate Prompt Command

For standalone prompts (not full PRPs), use the slash command:

```
/generate-prompt Create a caching layer for API responses
```

**What happens:**
1. Cursor checks for ambiguity and asks clarifying questions if needed
2. Analyzes task complexity (simple/moderate/complex)
3. Generates XML-structured prompt with all required sections
4. Saves to `PRPs/prompts/{NNN}-{task-name}.md`

**Example interaction:**
```
You: Generate a prompt for: Create a caching layer

Cursor: I need clarification before generating:
1. Cache what specifically? (API responses, database queries, computed values)
2. What's the context? (High-traffic web app, microservice, CLI tool)
3. What invalidation strategy? (TTL, event-based, manual)

You: Redis cache for API responses, e-commerce app, 5-minute TTL

Cursor: [Generates XML prompt and saves to PRPs/prompts/001-redis-caching-layer.md]
```

## Comparison with Other Editors

| Feature | Cursor | VS Code | Claude Code |
|---------|--------|---------|-------------|
| **Slash Commands** | `.cursor/prompts/*.md` | `.github/prompts/*.prompt.md` | `.claude/skills/*/SKILL.md` (invokes `.claude/commands/*.md`) |
| AI Rules | `.cursorrules` | `.github/copilot-instructions.md` | `CLAUDE.md` |
| Settings | `.cursor/settings.json` | `.vscode/settings.json` | `.claude/settings.local.json` |
| Setup Script | `./SETUP-CURSOR.sh` | `./SETUP-VSCODE.sh` | `./SETUP-CLAUDE.sh` |

## Tips for Best Results

1. **Be Explicit**: Reference specific files and patterns
2. **Use @ Mentions**: `@INITIAL.md` to include file context
3. **Iterate**: Ask Cursor to refine and improve
4. **Validate**: Always run tests after implementation

## Troubleshooting

### /validate not showing or running wrong validation
- **Not showing in slash list:** Ensure this folder is the workspace root. Check **Cursor Settings** → "prompts" → **Enable Prompts** is on. Command: `.cursor/prompts/validate.md`. Restart Cursor and type `/` again.
- **Runs wrong validation:** For **project** validation use **`/validate-project`** (from `/generate-validate`). For **template** validation the rule tells the AI to use `.cursor/prompts/validate.md`. If another validate runs, paste: "Use only .cursor/prompts/validate-project.md (or validate.md for template) in this repo; do not run PCI-ASSISTANT or health checks."

### Wrong validation runs when you use /validate or /validate-project
**Project-specific:** Use **`/validate-project`** (generated by `/generate-validate` from [.claude/commands/example-validate.md](.claude/commands/example-validate.md)) to avoid injected **`/validate`** commands. **Template (this repo):** **`/validate`** runs the 8-phase template check; the project rule tells the AI to use only this repo's validation.

### Cursor Not Reading Rules
1. Ensure `.cursorrules` exists in project root
2. Restart Cursor
3. Check file encoding is UTF-8

### Agent Mode Not Working
1. Verify Cursor Pro subscription (if required)
2. Check `cursor.chat.enableAgent` is `true`
3. Restart Cursor

### Context Issues
1. Use `@` to explicitly include files
2. Keep `.cursorrules` under 8000 tokens
3. Reference specific file paths
