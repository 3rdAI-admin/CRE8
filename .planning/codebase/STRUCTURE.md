# Codebase Structure

**Analysis Date:** 2026-02-07

## Directory Layout

```
context-engineering-template/
│
├── .claude/                      # Claude Code configuration & skills
│   ├── commands/                 # Slash command implementations
│   │   ├── generate-prd.md       # Create PRDs from INITIAL.md
│   │   ├── generate-prp.md       # Generate execution plans with multi-agent breakdown
│   │   ├── execute-prp.md        # Implement features from PRPs
│   │   ├── build-prp.md          # Finalize PRP, optionally build & run
│   │   ├── generate-prompt.md    # Create structured XML prompts for quick tasks
│   │   ├── generate-validate.md  # Analyze codebase and create /validate-project
│   │   ├── validate-project.md   # Project-specific validation (generated by /generate-validate)
│   │   ├── validate.md           # Template validation (8 phases + journal)
│   │   ├── new-project.md        # Create new project from template
│   │   └── summarize.md          # Summarize completed steps and next actions
│   ├── skills/                   # Skills for `/` menu discovery
│   │   ├── generate-prd/SKILL.md
│   │   ├── generate-prp/SKILL.md
│   │   ├── execute-prp/SKILL.md
│   │   ├── build-prp/SKILL.md
│   │   ├── generate-prompt/SKILL.md
│   │   ├── generate-validate/SKILL.md
│   │   ├── validate/SKILL.md
│   │   └── new-project/SKILL.md
│   └── settings.local.json       # Claude Code permissions (generated)
│
├── .cursor/                      # Cursor IDE configuration
│   ├── prompts/                  # Slash commands for Cursor
│   │   ├── generate-prd.md
│   │   ├── generate-prp.md
│   │   ├── execute-prp.md
│   │   ├── build-prp.md
│   │   ├── generate-prompt.md
│   │   ├── generate-validate.md
│   │   ├── validate-project.md   # Generated by /generate-validate
│   │   ├── validate.md
│   │   └── new-project.md
│   ├── settings.json             # Cursor workspace settings
│   └── README.md                 # Cursor-specific setup docs
│
├── .cursorrules                  # Cursor AI rules file
│
├── .github/                      # VS Code Copilot configuration
│   ├── copilot-instructions.md   # Global AI instructions for VS Code
│   ├── prompts/                  # Slash commands for VS Code
│   │   ├── generate-prd.prompt.md
│   │   ├── generate-prp.prompt.md
│   │   ├── execute-prp.prompt.md
│   │   ├── build-prp.prompt.md
│   │   ├── generate-prompt.prompt.md
│   │   ├── generate-validate.prompt.md
│   │   ├── validate-project.prompt.md  # Generated by /generate-validate
│   │   ├── validate.prompt.md
│   │   └── new-project.prompt.md
│   └── workflows/                # GitHub Actions (CI/CD)
│       └── validate.yml          # Automated validation on push/PR
│
├── .vscode/                      # VS Code configuration
│   ├── settings.json             # Workspace settings (auto-applied)
│   └── README.md                 # VS Code setup documentation
│
├── .planning/                    # GSD codebase analysis documents (generated)
│   └── codebase/
│       ├── ARCHITECTURE.md       # Architecture patterns and layers
│       ├── STRUCTURE.md          # This file - directory layout & conventions
│       ├── STACK.md              # Technology stack & dependencies
│       ├── INTEGRATIONS.md       # External APIs and services
│       ├── CONVENTIONS.md        # Code style and naming patterns
│       ├── TESTING.md            # Testing frameworks and patterns
│       └── CONCERNS.md           # Technical debt and issues
│
├── bin/                          # Utility and setup scripts
│   ├── setup.sh                  # Interactive unified setup for all IDEs
│   ├── setup.ps1                 # PowerShell unified setup for Windows
│   ├── setup-claude.sh           # Claude Code specific setup
│   ├── setup-cursor.sh           # Cursor specific setup
│   ├── setup-vscode.sh           # VS Code specific setup
│   ├── create-project.sh         # Create new projects from template (Bash)
│   ├── create-project.ps1        # Create new projects from template (PowerShell)
│   ├── install-claude-commands.sh # Install commands into existing projects
│   ├── sync-commands.sh          # Sync command definitions across IDEs
│   ├── sync-commands.ps1         # Sync commands across IDEs (PowerShell)
│   ├── install-dev-tools.sh      # Install Python/npm development tools
│   └── README.md                 # Scripts documentation
│
├── docs/                         # Documentation and tutorials
│   ├── overview.md               # One-page workflow summary
│   ├── pre-commit.md             # Pre-commit hooks setup
│   ├── tutorials/                # Learning resources
│   │   ├── README.md             # Tutorials index
│   │   ├── getting-started-walkthrough.md  # Part 1: Flask Daily Quote app
│   │   └── mcp-quote-server.md   # Part 2: MCP Quote server
│   └── validation/               # Validation command resources
│       ├── README.md             # Validation documentation
│       ├── ultimate_validate_command.md  # Comprehensive validation guide
│       └── example-validate.md   # Template for /generate-validate to use
│
├── examples/                     # Example projects and patterns
│   └── daily-quote-app/          # Flask web app tutorial project
│       ├── app.py                # Main Flask application
│       ├── quotes.py             # Quote data module
│       ├── templates/            # HTML templates
│       │   └── index.html        # Main page template
│       ├── static/               # CSS/JS assets
│       │   └── style.css         # Page styling
│       ├── requirements.txt       # Python dependencies
│       ├── README.md             # Project documentation
│       └── INITIAL.md            # Feature request example
│
├── PRPs/                         # Project Requirement Prompts and PRDs
│   ├── templates/                # Reusable templates
│   │   ├── prp_base.md           # Base template for generating PRPs
│   │   └── prd_base.md           # Base template for PRDs
│   ├── prompts/                  # Generated one-off prompts (from /generate-prompt)
│   │   └── 001-example.md        # Example structured prompt
│   └── [generated-prp-files].md  # PRPs generated by /generate-prp (e.g., user-auth.md)
│
├── use-cases/                    # Reference implementations for specific domains
│   │
│   ├── pydantic-ai/              # PydanticAI agent development
│   │   ├── CLAUDE.md             # PydanticAI-specific development rules
│   │   ├── README.md             # PydanticAI use-case guide
│   │   ├── .claude/              # PydanticAI-specific commands
│   │   │   ├── commands/
│   │   │   │   ├── generate-pydantic-ai-prp.md
│   │   │   │   └── execute-pydantic-ai-prp.md
│   │   │   └── skills/
│   │   ├── PRPs/                 # Agent-specific PRPs
│   │   │   ├── INITIAL.md
│   │   │   ├── README.md
│   │   │   └── templates/
│   │   │       └── prp_pydantic_ai_base.md
│   │   ├── examples/             # Working PydanticAI agent examples
│   │   │   ├── shared/           # Shared utilities across examples
│   │   │   │   ├── __init__.py
│   │   │   │   ├── providers.py  # get_llm_model() factory
│   │   │   │   └── settings.py   # Pydantic settings with env vars
│   │   │   ├── basic_chat_agent/ # Simple conversational agent
│   │   │   │   ├── __init__.py
│   │   │   │   ├── agent.py      # Agent definition with system prompt
│   │   │   │   └── __main__.py   # CLI entry point
│   │   │   ├── tool_enabled_agent/  # Agent with tool integration
│   │   │   │   ├── __init__.py
│   │   │   │   ├── agent.py      # Agent with @agent.tool decorators
│   │   │   │   └── __main__.py
│   │   │   ├── structured_output_agent/  # Agent with Pydantic output models
│   │   │   │   ├── __init__.py
│   │   │   │   ├── agent.py      # Agent with result_type=Model
│   │   │   │   └── __main__.py
│   │   │   ├── main_agent_reference/  # Complete multi-agent system reference
│   │   │   │   ├── __init__.py
│   │   │   │   ├── agent.py      # Main agent with tools
│   │   │   │   ├── research_agent.py  # Specialized research agent
│   │   │   │   ├── tools.py      # Tool implementations
│   │   │   │   ├── models.py     # Pydantic models for inputs/outputs
│   │   │   │   ├── providers.py  # Model provider configuration
│   │   │   │   ├── settings.py   # Environment configuration
│   │   │   │   ├── cli.py        # CLI interface
│   │   │   │   └── __main__.py
│   │   │   └── testing_examples/  # Test patterns and fixtures
│   │   │       ├── __init__.py
│   │   │       ├── conftest.py   # Pytest fixtures for testing
│   │   │       ├── test_agent_patterns.py  # Test examples with TestModel
│   │   │       └── __main__.py
│   │   └── copy_template.py      # Utility to copy examples to new projects
│   │
│   └── mcp-server/               # MCP (Model Context Protocol) server development
│       ├── CLAUDE.md             # MCP-specific development rules
│       ├── README.md             # MCP use-case guide
│       ├── .claude/              # MCP-specific commands
│       │   ├── commands/
│       │   │   ├── prp-mcp-create.md
│       │   │   └── prp-mcp-execute.md
│       │   └── skills/
│       ├── PRPs/                 # MCP-specific PRPs
│       │   ├── INITIAL.md
│       │   ├── README.md
│       │   ├── ai_docs/
│       │   │   ├── mcp_patterns.md
│       │   │   └── claude_api_usage.md
│       │   └── templates/
│       │       └── prp_mcp_base.md
│       ├── src/                  # TypeScript MCP server code
│       │   ├── index.ts          # Main MCP server with OAuth + PostgreSQL
│       │   ├── index_sentry.ts   # MCP server with Sentry monitoring
│       │   ├── types.ts          # TypeScript type definitions (Props, Env)
│       │   ├── auth/
│       │   │   └── github-handler.ts  # GitHub OAuth 2.0 flow
│       │   ├── database/
│       │   │   ├── connection.ts      # PostgreSQL connection management
│       │   │   ├── utils.ts           # Database utility functions
│       │   │   └── security.ts        # SQL validation and sanitization
│       │   └── tools/
│       │       └── register-tools.ts  # Centralized tool registration
│       ├── examples/             # Example MCP tool implementations
│       │   ├── database-tools.ts      # Database tool examples
│       │   └── database-tools-sentry.ts  # With Sentry integration
│       ├── tests/                # TypeScript test files
│       │   └── [test files]
│       ├── wrangler.jsonc        # Cloudflare Workers config (MCP + OAuth)
│       ├── wrangler-simple.jsonc # Simplified example config
│       ├── tsconfig.json         # TypeScript compiler settings
│       ├── package.json          # npm dependencies (MCP SDK, Zod, postgres.js)
│       ├── package-lock.json     # Locked dependency versions
│       └── node_modules/         # Installed npm packages
│
├── journal/                      # Validation progress and session tracking
│   ├── README.md                 # Journal index and explanation
│   ├── 2026-02-07.md            # Daily progress file (auto-created by commands)
│   └── [YYYY-MM-DD].md          # One per day, appended by /validate-project, /execute-prp, /build-prp
│
├── .pre-commit-config.yaml       # Pre-commit hooks configuration
├── .python-version               # Python version selector (for pyenv)
├── .gitignore                    # Git exclusion patterns
├── .gitattributes                # Git attribute settings
├── CLAUDE.md                     # Global AI development rules for this project
├── INITIAL.md                    # Project feature request template
├── README.md                     # Main project documentation
├── pyproject.toml                # Python project configuration
├── uv.lock                       # Lockfile for uv package manager
└── LICENSE                       # MIT license

```

## Directory Purposes

**`.claude/`**
- Purpose: Claude Code IDE configuration and slash command definitions
- Contains: Markdown command files, skill definitions, workspace settings
- Key files: `commands/*.md` (command implementations), `skills/*/SKILL.md` (menu discovery)

**`.cursor/`**
- Purpose: Cursor IDE configuration and slash command definitions
- Contains: Markdown prompt files, workspace settings
- Key files: `prompts/*.md` (command definitions), `settings.json`

**`.github/`**
- Purpose: VS Code Copilot configuration and GitHub Actions
- Contains: Copilot instructions, slash commands, CI/CD workflows
- Key files: `copilot-instructions.md`, `prompts/*.prompt.md`

**`.planning/codebase/`**
- Purpose: GSD codebase analysis documents for future planning and execution phases
- Contains: ARCHITECTURE.md, STRUCTURE.md, STACK.md, TESTING.md, CONVENTIONS.md, CONCERNS.md, INTEGRATIONS.md
- Key files: Analysis documents used by `/gsd:plan-phase` and `/gsd:execute-phase`

**`bin/`**
- Purpose: Executable setup and project creation scripts
- Contains: Bash/PowerShell scripts for installation, configuration, project scaffolding
- Key files: `setup.sh` (main installer), `create-project.sh` (new projects)

**`docs/`**
- Purpose: Learning materials and reference documentation
- Contains: Tutorials, guides, validation documentation
- Key files: `tutorials/getting-started-walkthrough.md` (beginner guide)

**`examples/`**
- Purpose: Complete working example projects
- Contains: Full applications demonstrating workflow (Flask app, quotes database, etc.)
- Key files: `daily-quote-app/app.py` (Flask example)

**`PRPs/`**
- Purpose: Storage for execution plans and requirements documents
- Contains: Generated PRPs, PRDs, one-off prompts
- Key files: User-generated files created by `/generate-prp` and `/generate-prd`

**`use-cases/pydantic-ai/`**
- Purpose: Reference implementations for PydanticAI agent development
- Contains: Working agent examples, testing patterns, shared utilities
- Key files: `examples/basic_chat_agent/agent.py`, `examples/main_agent_reference/`

**`use-cases/mcp-server/`**
- Purpose: Reference implementation for MCP servers on Cloudflare Workers
- Contains: Complete MCP server with OAuth, PostgreSQL, tool registration
- Key files: `src/index.ts` (main server), `examples/database-tools.ts` (tool examples)

**`journal/`**
- Purpose: Session tracking and progress logging
- Contains: Daily markdown files with validation and execution progress
- Key files: `YYYY-MM-DD.md` files auto-created by commands

## Key File Locations

**Entry Points:**
- `bin/setup.sh`: Initial setup script (installation & IDE config)
- `bin/create-project.sh`: Create new projects from template
- README.md: Main documentation and workflow overview
- `.claude/skills/`: Slash command discovery for Claude Code

**Configuration:**
- `CLAUDE.md`: Global development rules
- `pyproject.toml`: Python project configuration (ruff, mypy, pytest)
- `use-cases/pydantic-ai/CLAUDE.md`: PydanticAI-specific rules
- `use-cases/mcp-server/CLAUDE.md`: MCP-specific rules

**Core Logic:**
- `use-cases/pydantic-ai/examples/basic_chat_agent/agent.py`: Simple agent pattern
- `use-cases/pydantic-ai/examples/main_agent_reference/agent.py`: Complex multi-agent pattern
- `use-cases/mcp-server/src/index.ts`: MCP server with OAuth
- `examples/daily-quote-app/app.py`: Flask web application

**Testing:**
- `use-cases/pydantic-ai/examples/testing_examples/test_agent_patterns.py`: Test patterns
- `.pre-commit-config.yaml`: Pre-commit validation hooks

## Naming Conventions

**Files:**
- Markdown command files: `{command-name}.md` (e.g., `generate-prp.md`)
- Skill definition files: `SKILL.md` (in subdirectories under `skills/`)
- Generated PRPs: `{feature-name}.md` (user-created in `PRPs/`)
- Daily journal: `YYYY-MM-DD.md` (auto-created in `journal/`)
- Python modules: `{module_name}.py` (snake_case, e.g., `agent.py`, `tools.py`)
- TypeScript modules: `{module-name}.ts` (kebab-case for files, PascalCase for classes)

**Directories:**
- IDE configs: `.{ide}/` (e.g., `.claude/`, `.cursor/`, `.github/`)
- Python packages: `{package_name}/` (snake_case with `__init__.py`)
- Feature examples: `{feature_name_agent}/` (snake_case_agent pattern in use-cases)
- Use-case domains: `{framework-name}/` (e.g., `pydantic-ai/`, `mcp-server/`)

**Functions/Classes:**
- Python functions: `snake_case()` (e.g., `get_llm_model()`, `chat_with_agent()`)
- Python classes: `PascalCase` (e.g., `ConversationContext`, `ResearchQuery`)
- TypeScript functions: `camelCase()` (e.g., `registerAllTools()`)
- TypeScript classes: `PascalCase` (e.g., `MyMCP`, `GitHubHandler`)

## Where to Add New Code

**New Feature (Python Agent):**
- Primary code: `use-cases/pydantic-ai/examples/{feature_name_agent}/agent.py`
- Tools: `use-cases/pydantic-ai/examples/{feature_name_agent}/tools.py`
- Models: `use-cases/pydantic-ai/examples/{feature_name_agent}/models.py`
- Tests: `use-cases/pydantic-ai/examples/testing_examples/test_{feature_name}.py`
- Documentation: `use-cases/pydantic-ai/examples/{feature_name_agent}/README.md`

**New MCP Tool (TypeScript):**
- Tool module: `use-cases/mcp-server/src/tools/{feature-name}-tools.ts`
- Tool registration: Update `use-cases/mcp-server/src/tools/register-tools.ts` to import and call registration
- Database schema: `use-cases/mcp-server/src/database/` (if needed)
- Documentation: Add to `use-cases/mcp-server/README.md`

**New Slash Command:**
- Command definition: `.claude/commands/{command-name}.md` (Claude Code)
- Skill wrapper: `.claude/skills/{command-name}/SKILL.md`
- Cursor version: `.cursor/prompts/{command-name}.md`
- VS Code version: `.github/prompts/{command-name}.prompt.md`
- Documentation: Add to README.md tables

**New Use-Case Template:**
- Create: `use-cases/{new-domain}/`
- Include: `CLAUDE.md`, `README.md`, `PRPs/`, `examples/`
- Follow: Patterns from `pydantic-ai/` or `mcp-server/` structure

**Utilities & Helpers:**
- Shared Python: `use-cases/pydantic-ai/examples/shared/` (e.g., `providers.py`, `settings.py`)
- Database functions: `use-cases/mcp-server/src/database/utils.ts`
- Auth functions: `use-cases/mcp-server/src/auth/`

## Special Directories

**`journal/`:**
- Purpose: Track validation and execution progress
- Generated: Yes (auto-created by `/validate-project`, `/execute-prp`, `/build-prp`)
- Committed: Yes (version control tracks progress)
- Pattern: One file per day (`YYYY-MM-DD.md`), README.md index
- Access: Read by users to resume from where they left off after IDE restart

**`node_modules/` (in mcp-server):**
- Purpose: Installed npm dependencies
- Generated: Yes (created by `npm install`)
- Committed: No (git-ignored via .gitignore)
- Pattern: Standard npm structure

**`.mypy_cache/`, `.pytest_cache/`, `.ruff_cache/`:**
- Purpose: Tool caches for faster execution
- Generated: Yes (auto-created by tools)
- Committed: No (git-ignored)
- Pattern: Standard tool cache directories

---

*Structure analysis: 2026-02-07*
