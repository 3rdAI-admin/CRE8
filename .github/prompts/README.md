# VS Code Copilot Prompt Commands

This folder contains prompt files that can be used as slash commands in GitHub Copilot Chat. **The same workflow and commands apply in all three IDEs:** VS Code (this folder), Claude Code (`.claude/commands/`), and Cursor (`.cursor/prompts/`). **`/generate-validate`** creates **`/validate-project`** in each IDE; use **`/validate-project`** (not `/validate`) for project validation.

## Quick Setup

Run the automated setup script from the project root:

```bash
./SETUP-VSCODE.sh
```

Or manually enable in VS Code Settings:

```json
{
  "chat.promptFiles": true
}
```

## Available Commands (execution order)

| Order | Command | Description | When to run |
|-------|---------|-------------|-------------|
| 1 | `/new-project` | Create a new project from the template; **copies all slash commands** (`.github/`, `.cursor/`, `.claude/`, `.vscode/`) into the new project so you can open it and continue the workflow | When starting a new project |
| 2 | `/generate-prp` | Generate a comprehensive PRP from INITIAL.md | For each feature or when requirements change |
| 3 | `/generate-validate` | Analyze codebase and create **`/validate-project`** from example-validate | **Once, or after a significant project change** (run after planning, before building) |
| 4 | `/build-prp` | **Finalize** PRP (review/edit), then optionally **build** and **run** the project | After you have a PRP; when you want to finalize the plan before implementing |
| 5 | `/execute-prp` | Implement a feature from a PRP file | After `/build-prp` (or after `/generate-prp` if you skip review); main implementation path |
| 6 | **`/validate-project`** | Run project-specific validation (generated by `/generate-validate`) | After building; use this, not `/validate`, to avoid injected commands |
| 6b | `/validate` | Run template 8-phase validation (this repo only) | When validating the context-engineering template itself |
| 7 | `/generate-prompt` | Generate XML-structured prompt with ambiguity detection | Anytime (quick tasks) |

## Usage Examples

### Generate a PRP
```
/generate-prp INITIAL.md
```
Creates a comprehensive Product Requirements Prompt in `PRPs/` folder.

### Execute a PRP
```
/execute-prp PRPs/my-feature.md
```
Implements the feature with validation loops.

### Build from PRP (finalize → build → run)
```
/build-prp PRPs/my-feature.md
```
or
```
/build-prp
```
1. **Finalize** – AI reviews the PRP, summarizes it, suggests edits; you confirm when it's ready.  
2. **Build** (optional) – AI asks "Proceed to build?"; if yes, implements and validates.  
3. **Run** (optional) – After build, AI asks "Run the project?"; if yes, starts the app.  
If no path is given, the AI lists PRPs and asks which to use.

### Validate Codebase
```
/validate-project
```
Runs the project-specific validation (generated by `/generate-validate`): linting, type checking, style checking, unit tests, E2E. Use **`/validate-project`** (not `/validate`) to avoid conflicts with injected commands.

In the context-engineering template repo only, **`/validate`** runs the 8-phase template validation (structure, TypeScript, Python, shell, JSON/YAML, Markdown, docs, journal).

### Generate Custom Validation
```
/generate-validate
```
Analyzes your codebase and creates **`/validate-project`** in all IDEs (from example-validate template). Run once or after a significant project change.

### Generate Prompt
```
/generate-prompt Create a caching layer for API responses
```
Creates an XML-structured prompt with:
- **Ambiguity detection** - Asks clarifying questions if request is unclear
- **Adaptive reasoning** - Selects complexity based on task analysis
- **WHY explanations** - Every constraint includes reasoning
- Saves to `PRPs/prompts/{NNN}-{task-name}.md`

## The PRP Workflow

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│   INITIAL.md    │────▶│  /generate-prp  │────▶│  PRPs/feature.md│
│  (requirements) │     │   (research &   │     │  (comprehensive │
│                 │     │    planning)    │     │   impl guide)   │
└─────────────────┘     └─────────────────┘     └────────┬────────┘
                                                         │
                                                         ▼
         ┌───────────────────────────────────────────────┐
         ▼                                               │
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│ /generate-      │────▶│   /build-prp    │────▶│  /execute-prp   │
│  validate       │     │  (finalize PRP, │     │  (implement     │
│  (once/change)  │     │   optionally     │     │   from PRP)     │
└─────────────────┘     │   build & run)  │     └────────┬────────┘
                        └─────────────────┘              │
                                                         ▼
                        ┌─────────────────┐     ┌─────────────────┐
                        │    Complete!    │◀────│/validate-project│
                        │                 │     │  (verify all    │
                        │                 │     │   passes)       │
                        └─────────────────┘     └─────────────────┘
```

## Prompt File Structure

Each `.prompt.md` file has:
- **Frontmatter**: `mode: agent` enables full tool access
- **Description**: Shows in command autocomplete
- **Instructions**: What the AI should do

Example:
```markdown
---
mode: agent
description: Short description for autocomplete
---

# Command Title

Instructions for the AI...
```

## Comparison: VS Code vs Claude Code

| Feature | VS Code (Copilot) | Claude Code |
|---------|-------------------|-------------|
| Location | `.github/prompts/` | `.claude/commands/` |
| Extension | `.prompt.md` | `.md` |
| Variables | Not supported | `$ARGUMENTS` |
| Invocation | `/command-name` | `/command-name` |
| Settings | `chat.promptFiles` | `settings.local.json` |

## Tips

1. **Arguments**: Pass file paths after the command
   ```
   /generate-prp use-cases/pydantic-ai/PRPs/INITIAL.md
   ```

2. **Context**: The AI has access to your full workspace

3. **Iteration**: Commands can be run multiple times - validation loops are built in

4. **Customization**: Edit the `.prompt.md` files to customize behavior

## Troubleshooting

**Commands not showing up?**
- Ensure `chat.promptFiles` is enabled
- Restart VS Code after enabling
- Check files are in `.github/prompts/` with `.prompt.md` extension

**Command not working as expected?**
- Open the prompt file and review instructions
- Add more specific context to your request
- Try providing explicit file paths
